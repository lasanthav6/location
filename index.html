<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Joufun Ooga App</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <!-- Google Material Icons -->
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
  <style>
    body { font-family: Arial, sans-serif; margin:0; background:#f9f9f9; }
    header { display:flex; background:#333; color:#fff; }
    header button {
      flex:1; padding:15px; border:none; background:#333; color:#fff;
      font-size:16px; cursor:pointer; display:flex; align-items:center; justify-content:center;
    }
    header button.active { background:#555; }
    header .material-icons { margin-right:8px; }
    .tab { display:none; padding:20px; }
    .tab.active { display:block; }
    .group { margin-bottom:20px; }
    .group h3 { margin-bottom:10px; }
    .group button {
      margin:5px; padding:10px 15px; border:1px solid #ccc; border-radius:5px;
      cursor:pointer; background:#eee;
    }
    .group button.green { background:#4caf50; color:#fff; }
    .group button.red { background:#f44336; color:#fff; }
    #titleDisplay { font-size:20px; margin-bottom:15px; font-weight:bold; }
    /* Popup */
    #popup {
      display:none; position:fixed; top:50%; left:50%; transform:translate(-50%,-50%);
      background:#fff; border:2px solid #333; padding:20px; border-radius:10px;
      box-shadow:0 4px 10px rgba(0,0,0,0.3); z-index:1000;
    }
    #popup h2 { margin-top:0; }
    #popup button { margin:5px; padding:10px 15px; }
  </style>
</head>
<body>

<header>
  <button id="btnJoufun" class="active"><span class="material-icons">directions_bus</span> Joufun</button>
  <button id="btnOoga"><span class="material-icons">agriculture</span> Ooga</button>
  <button id="btnSettings"><span class="material-icons">settings</span> Settings</button>
</header>

<!-- Joufun Tab -->
<div id="tabJoufun" class="tab active">
  <div id="titleDisplay">Select a button</div>
  <div class="group">
    <h3>Bashou Group</h3>
    <div id="bashouButtons"></div>
  </div>
</div>

<!-- Ooga Tab -->
<div id="tabOoga" class="tab">
  <h2>Ooga Count</h2>
  <p>Current count: <span id="oogaCount">0</span></p>
</div>

<!-- Settings Tab -->
<div id="tabSettings" class="tab">
  <h2>Settings</h2>
  <label>Joufun Location: <input id="joufunLoc" type="text"></label><br><br>
  <label>Ooga Location: <input id="oogaLoc" type="text"></label><br><br>
  <button onclick="setLocations()">Confirm Locations</button>
  <p>Current Location: <span id="curLoc">â€”</span></p>
</div>

<!-- Popup -->
<div id="popup">
  <h2 id="popupTitle">Popup</h2>
  <p>Count: <span id="popupCount">0</span></p>
  <button onclick="changeCount(-1)">-</button>
  <button onclick="changeCount(1)">+</button><br><br>
  <button onclick="confirmPopup()">Confirm</button>
  <button onclick="closePopup()">Close</button>
</div>

<script>
  // Tabs
  const tabs = { Joufun:'tabJoufun', Ooga:'tabOoga', Settings:'tabSettings' };
  function showTab(name){
    for(let t in tabs){
      document.getElementById(tabs[t]).classList.remove('active');
      document.getElementById('btn'+t).classList.remove('active');
    }
    document.getElementById(tabs[name]).classList.add('active');
    document.getElementById('btn'+name).classList.add('active');
  }
  document.getElementById('btnJoufun').onclick=()=>showTab('Joufun');
  document.getElementById('btnOoga').onclick=()=>showTab('Ooga');
  document.getElementById('btnSettings').onclick=()=>showTab('Settings');

  // Bashou buttons
  const bashouList = ["A1","A2","A3","A4","A5","A6","A7","A8","A9","A10","A11","A12",
                      "B1","B2","B3","B4","B5","B6","B7","B8",
                      "C1","C2","C3","E1","E2","E3","E4","E6"];
  const container = document.getElementById('bashouButtons');
  bashouList.forEach(name=>{
    const btn=document.createElement('button');
    btn.textContent=name;
    btn.onclick=()=>{
      if(btn.classList.contains('green')){ btn.classList.remove('green'); btn.classList.add('red'); }
      else if(btn.classList.contains('red')){ btn.classList.remove('red'); }
      else { btn.classList.add('green'); }
      document.getElementById('titleDisplay').textContent=name;
      showPopup(name);
    };
    container.appendChild(btn);
  });

  // Popup logic
  let popupCount=0;
  function showPopup(title){
    document.getElementById('popupTitle').textContent=title;
    document.getElementById('popupCount').textContent=popupCount;
    document.getElementById('popup').style.display='block';
  }
  function closePopup(){ document.getElementById('popup').style.display='none'; }
  function changeCount(val){
    popupCount+=val;
    if(popupCount<0) popupCount=0;
    document.getElementById('popupCount').textContent=popupCount;
  }
  function confirmPopup(){
    document.getElementById('oogaCount').textContent=popupCount;
    closePopup();
  }

  // Settings
  function setLocations(){
    const j=document.getElementById('joufunLoc').value;
    const o=document.getElementById('oogaLoc').value;
    alert("Locations set:\nJoufun: "+j+"\nOoga: "+o);
  }
  if("geolocation" in navigator){
    navigator.geolocation.getCurrentPosition(pos=>{
      document.getElementById('curLoc').textContent=
        pos.coords.latitude.toFixed(6)+", "+pos.coords.longitude.toFixed(6);
    });
  }
</script>

</body>
</html>
